{% extends "base.html" %}

{% block content %}
<div class="max-w-lg mx-auto bg-white p-6 rounded-lg shadow-md">
    <h1 class="text-2xl font-bold mb-4 text-gray-800 text-center">Suggestion Box</h1>

    {% if messages %}
        {% for message in messages %}
            <p class="mb-2 px-4 py-2 rounded {{ message.tags }} bg-green-100 text-green-800">{{ message }}</p>
        {% endfor %}
    {% endif %}

    <form method="POST" class="mb-6">
        {% csrf_token %}
        <textarea name="message" rows="4" placeholder="Enter your suggestion..."
            class="w-full p-3 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 mb-2"></textarea>
        <button type="submit"
            class="w-full bg-blue-600 text-white py-2 rounded-md hover:bg-blue-700 transition">
            Submit
        </button>
    </form>

    <h2 class="text-lg font-semibold mb-2 text-gray-700">Recent Suggestions</h2>
    <ul>
        {% for s in suggestions %}
            <li class="border-b py-2 text-gray-700">
                <span class="font-semibold">
                    {% if s.user %}
                        {{ s.user.phone_number }}
                    {% else %}
                        Anonymous
                    {% endif %}
                    :
                </span>
                {{ s.message }}
                <span class="text-gray-400 text-sm">({{ s.submitted_at|date:"M d, Y H:i" }})</span>
            </li>
        {% empty %}
            <li>No suggestions yet.</li>
        {% endfor %}
    </ul>
</div>
{% endblock %}
