{% extends "base.html" %}
{% block content %}
<div class="max-w-3xl mx-auto mt-10 bg-white rounded-xl shadow-md p-8 border border-gray-100">
    <h1 class="text-3xl font-bold text-gray-800 mb-6">
        Slot <span class="text-blue-600">{{ slot.slot_id }}</span>
    </h1>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-gray-700">
        <p><strong>Area:</strong> {{ slot.area.name }}</p>

        {% if slot.level %}
        <p><strong>Level:</strong> {{ slot.level.level_name }}</p>
        {% endif %}

        <p><strong>Handicapped:</strong>
            {% if slot.is_handicapped %}
                <span class="text-blue-700 font-semibold">Yes</span>
            {% else %}
                <span class="text-gray-500">No</span>
            {% endif %}
        </p>

        <p><strong>Reserved for:</strong> {{ slot.reserved_for|default:"None" }}</p>
    </div>

    <div class="mt-6 p-4 bg-gray-50 rounded-lg border border-gray-200">
        {% if latest_status %}
            <p class="text-lg">
                <strong>Status:</strong>
                {% if latest_status.is_occupied %}
                    <span class="text-red-600 font-semibold">Occupied</span>
                {% else %}
                    <span class="text-green-600 font-semibold">Empty</span>
                {% endif %}
            </p>
            <p class="text-sm text-gray-500 mt-1">Last updated: {{ latest_status.timestamp }}</p>
        {% else %}
            <p class="text-gray-600 italic">Status: No data yet</p>
        {% endif %}
    </div>

    <div class="mt-8 flex items-center justify-between">
        <a href="{% url 'parking_area_detail' slot.area.id %}"
           class="text-gray-600 hover:text-gray-800 transition">‚Üê Back to Slots</a>

       {% if latest_status and latest_status.is_occupied %}
    <!-- Show Leave Slot button -->
    <a href="{% url 'leave_slot' slot.id %}"
       class="bg-red-600 text-white px-5 py-2 rounded-lg shadow hover:bg-red-700 transition">
        Leave Slot
    </a>
{% else %}
    <!-- Show Occupy Slot button -->
    <a href="{% url 'update_slot_status' slot.id %}"
       class="bg-green-600 text-white px-5 py-2 rounded-lg shadow hover:bg-green-700 transition">
        Occupy Slot
    </a>
{% endif %}
    </div>
</div>
{% endblock %}
